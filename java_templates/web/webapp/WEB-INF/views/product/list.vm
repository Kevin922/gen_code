<DIV id="navBar" class="page-header">
    <li>库存商品列表</li>
</DIV>

#parse("product/search.vm")

<!-- 表格数据 -->
<table class="table table-striped table-bordered table-condensed grid">
	<thead>
		<tr>
			<th class='center' width="2%">ID</th>
			<th class='center' width="7%">商品名称</th>
			<th class='center' width="2%">商品重量</th>
			<th class='center' width="4%">操作</th>
		</tr>
	</thead>
	<tbody>
    #foreach(${item} in ${page.result})
		<tr id="item${item.pid}">
			<td>$!{item.pid}</td>
            <td>$!{item.pname}</td>
            <td>$!{item.weight}</td>
            <td class="textC">
				<div class="btn-group">
                    <a class="blue" href="/productForSale/view?pid=$!{item.pid}"><i class="icon-eye-open"></i>查看</a>
                    <a class="red" href="/productForSale/saveOrUpdate?pid=$!{item.pid}" ><i class="icon-pencil"></i>修改</a>
                    <a class="red" onclick="del(${item.pid})" ><i class="icon-minus"></i>删除</a>
				</div>
			</td>
		</tr>
    #end
	</tbody>
</table>

<script src="/assets/js/jquery.js"></script>
<script src="/assets/js/riotjs/riotjs.js"></script>
<script type="text/javascript" src="/assets/plc/base.list.js?v=#vn()"></script>

<script>
    function del(pid){
        $.ajax({
            type : "post",
            url  : "/productForSale/del",
            dataType : "json",
            data : {pid: pid},
            timeout: 3500,
            async:false,
            success : function(data){
                console.log(data);
                if(data.code == "success"){
                    XUI.window.alert("成功，移入回收站");
                    $("#itme"+pid).hide();
                }else{
                    XUI.window.alert("操作没成功，"+data.result);
                }
            },
            error : function(){
                XUI.window.alert("网络错误，请稍后重试");
            }
        });
    }

//    function changeOnSale(pid){
//        $.ajax({
//            type : "post",
//            url  : "/productForSale/onSale",
//            dataType : "json",
//            data : {pid: pid},
//            timeout: 3500,
//            async:false,
//            success : function(data){
//                console.log(data);
//                if(data.code == "success"){
//                    XUI.window.alert("上架操作成功");
//                    $("#forSaleItem"+pid).hide();
//                }else{
//                    XUI.window.alert("操作没成功，"+data.result);
//                }
//            },
//            error : function(){
//                XUI.window.alert("网络错误，请稍后重试");
//            }
//        });
//    }
</script>
<!-- 分页栏 -->
#showPage($!{page})